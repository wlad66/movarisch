â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸš€ COMANDI RAPIDI PER DEPLOY - MoVaRisCh (Windows)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Œ METODO STANDARD: SCRIPT AUTOMATIZZATO
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Questo Ã¨ il metodo testato e funzionante per Windows.

1. Apri PowerShell come Amministratore (opzionale, ma meglio)
2. Vai nella cartella del progetto:
   cd c:\PROGRAMMAZIONE\movarisch

3. Esegui lo script:
   .\deploy.ps1

COSA FA LO SCRIPT (v2.2.0):
1. Build Locale: Compila React (`npm run build`) e aggiorna versioni (`add-version.js`).
2. Pulitura Remota: Cancella vecchi file dalla VPS per evitare conflitti.
3. Upload: Carica `dist.tar.gz`, `Dockerfile` e file config tramite `pscp`.
4. Deploy Remoto:
   - Ferma i container (`docker-compose down`)
   - PULIZIA AGGRESSIVA (`docker system prune -f`)
   - Ricostruisce e avvia (`docker-compose up -d --build --force-recreate`)
5. Verifica: Stampa l'hash del file `index.html` live per conferma.


ğŸ“Œ METODO MANUALE (SOLO EMERGENZA)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Se `deploy.ps1` fallisce, puoi replicare i passi manualmente:

1. Build Locale:
   npm run build
   tar -czf dist.tar.gz -C server dist

2. Upload (richiede PuTTY/pscp installato):
   pscp dist.tar.gz root@72.61.189.136:/opt/movarisch-new/

3. Comandi VPS (via SSH):
   ssh root@72.61.189.136
   cd /opt/movarisch-new
   tar -xzf dist.tar.gz -C server/
   docker-compose down
   docker system prune -f
   docker-compose up -d --build --force-recreate


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“‹ CHECKLIST DEBUG DEPLOY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SE LE MODIFICHE NON APPAIONO:
1. Controlla che `deploy.ps1` abbia finito con "OK Deploy completato!".
2. Verifica l'hash stampato alla fine dello script.
3. Incognito Mode: Prova browser in incognito (cache issue).
4. VPS Nginx: Verifica che `/etc/nginx/sites-enabled/movarisch...` abbia `proxy_pass http://localhost:8004`.

SE ERRORE 403 / LOGIN:
1. Verifica che backend sia su: `docker logs movarisch-backend`
2. Database: `docker logs movarisch-db`

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  âœ… NOTE IMPORTANTI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
- Il database Ã¨ PERSISTENTE nel volume `movarisch-db-data`.
- Non eseguire `docker-compose down -v` (perderesti i dati!).
- La VPS ospita altre app, non toccare container altrui.

